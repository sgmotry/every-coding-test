# 株式会社エブリー　技術試験

## 実行方法
Go言語の実行環境が必須です。バージョンは開発環境と同じ`go 1.25.1`を推奨します。

1. `every-coding-test/recipe-manager`ディレクトリに移動します。

2. テストデータ`recipes.json`が同ディレクトリに存在していることを確認してください。

```bash
go run main.go
```
を実行すると、一連の機能のテスト結果が出力されます。

出力の例はこのテキストの最後の方にあります。

## データ構造の設計理由

レシピごとに一意の識別をするために、Idを入れています。

データベースの自動採番されるプライマリキーを想定して、マイナスを許容しないuint32で定義しています。

マイナスを許容しない点では、HowmanyやTimeもuint32にすべきですが、途中までintで開発しており、goの型推定や引数の型など色々なところを変更する必要があった上に、記述量が多くなって可読性が下がりそうだったのでintのままにしました。

材料や栄養素は、多様な単位が含まれる可能性があるので、単位を自由に設定できるAmount型を作りました。これにより、大さじ・個・g・μgといった様々な表現に対応できます。

レシピの説明文を管理するデータには、コメントアウトしてありますが、画像のURLを付加できるImageが定義してあります。将来、レシピに画像を入れることになったとき、この部分を変更して対応できます。

栄養素を管理するNutritionには、カロリーと基本の栄養素の他、ビタミンなどのその他の栄養素を保存できるようにしました。例えば、欲しい栄養素で検索するなどの機能に使えます。

## 工夫した点

レシピのソート処理にはクイックソートを使用し、少ない計算量でソート出来るようにしました。

ナップサック問題では、最適解を得ることを目標としつつ、計算量を減らすために動的計画法を使用しました。

引数のバリデーションを中心に、エラーがどこで、なぜ起きたかが分かるエラーハンドリングを意識しました。

## 改善案・拡張アイデア

データ構造：
- 材料や栄養素にもIDを付加すると、記述の揺らぎを防止出来たり、種類ごとに管理できたりするので、例えば季節の食材を使ったレシピや、特定の栄養素の多いレシピを検索できるようになると思いました。

## AI利用について

### どのように利用したか

- 作ったデータ構造を提示してテストデータを書いてもらいました
- Go言語を久しぶりに触ったので、自作の型の定義方法や配列の操作方法など教えてもらいました
- 引数のバリデーションの方法を教えてもらいました
- ナップサック問題はどういったアルゴリズムを使うべきが分からなかったので、問題文を提示し、適切なアルゴリズムを教えてもらいました
- 実装に詰まったとき、実装したい内容を伝えてコードを書いてもらい、参考にしました

### 利用時に用いたプロンプト（一例）

```
golangでは、tsのように、特定の文字列のみを認める型や引数を定義することは出来ますか。

以下のような問題を解く際には，どのようなアルゴリズムが有効でしょうか
[問題文]
```

### 利用したAIの名称
Gemini 2.5 flash, 2.5 pro　基本的にはこの2つです

Claude sonnet 4.5　最近発表されて好評だったので、実装の参考のために少し使っていました