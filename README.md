# 株式会社エブリー　技術試験

## 実行方法
Go言語の実行環境が必須です。バージョンは開発環境と同じ`go 1.25.1`を推奨します。

1. `every-coding-test/recipe-manager`ディレクトリに移動します。

2. テストデータ`recipes.json`が同ディレクトリに存在していることを確認してください。

```bash
go run main.go
```
を実行すると、一連の機能のテスト結果が出力されます。

出力の例はこのテキストの最後の方にあります。

## データ構造の設計理由

レシピごとに一意の識別をするために、Idを入れています。

データベースの自動採番されるプライマリキーを想定して、マイナスを許容しないuint32で定義しています。

マイナスを許容しない点では、HowmanyやTimeもuint32にすべきですが、途中までintで開発しており、goの型推定や引数の型など色々なところを変更する必要があった上に、記述量が多くなって可読性が下がりそうだったのでintのままにしました。

材料や栄養素は、多様な単位が含まれる可能性があるので、単位を自由に設定できるAmount型を作りました。これにより、大さじ・個・g・μgといった様々な表現に対応できます。

レシピの説明文を管理するデータには、コメントアウトしてありますが、画像のURLを付加できるImageが定義してあります。将来、レシピに画像を入れることになったとき、この部分を変更して対応できます。

栄養素を管理するNutritionには、カロリーと基本の栄養素の他、ビタミンなどのその他の栄養素を保存できるようにしました。例えば、欲しい栄養素で検索するなどの機能に使えます。

## 工夫した点

レシピのソート処理にはクイックソートを使用し、少ない計算量でソート出来るようにしました。

ナップサック問題では、最適解を得ることを目標としつつ、計算量を減らすために動的計画法を使用しました。

引数のバリデーションを中心に、エラーがどこで、なぜ起きたかが分かるエラーハンドリングを意識しました。

## 改善案・拡張アイデア

データ構造：
- 材料や栄養素にもIDを付加すると、記述の揺らぎを防止出来たり、種類ごとに管理できたりするので、例えば季節の食材を使ったレシピや、特定の栄養素の多いレシピを検索できるようになると思いました。

## AI利用について

### どのように利用したか

- 作ったデータ構造を提示してテストデータを書いてもらいました
- Go言語を久しぶりに触ったので、自作の型の定義方法や配列の操作方法など教えてもらいました
- 引数のバリデーションの方法を教えてもらいました
- ナップサック問題はどういったアルゴリズムを使うべきが分からなかったので、問題文を提示し、適切なアルゴリズムを教えてもらいました
- 実装に詰まったとき、実装したい内容を伝えてコードを書いてもらい、参考にしました

### 利用時に用いたプロンプト（一例）

```
golangでは、tsのように、特定の文字列のみを認める型や引数を定義することは出来ますか。

以下のような問題を解く際には，どのようなアルゴリズムが有効でしょうか
[問題文]
```

### 利用したAIの名称
Gemini 2.5 flash, 2.5 pro　基本的にはこの2つです

Claude sonnet 4.5　最近発表されて好評だったので、実装の参考のために少し使っていました

## 出力の例

```bash
----読み込んだJSONデータ----

 [{1 基本の肉じゃが 和食 4 35 [牛肉は食べやすい大きさに切る。 じゃがいも、玉ねぎ、人参は皮をむき、適当な大きさに切る。 鍋に油を熱し、牛肉、じゃがいも、人参、玉ねぎの順に炒める。 水と調味料（醤油、みりん、砂糖、酒）を加え、アクを取りながら煮込む。 じゃがいもが柔らかくなったら完成。] [{牛肉（薄切り） {250 g}} {じゃがいも {4 個}} {人参 {1 本}} {玉ねぎ {1 個}} {醤油 {4 大さじ}}] {450.5 30.2 18.1 48.7 [{ビタミンC {35 mg}}]}} {2 簡単ミートソースパスタ 洋食 2 25 [玉ねぎ、人 参、セロリをみじん切りにする。 鍋にオリーブオイルを熱し、ひき肉とみじん切り野菜を炒める。 ひき肉の色が変わったら、カットトマト缶、水、コンソメ、ローリエを加える。 弱火で20分ほど煮込み、塩胡椒で味を調える。 茹でたパスタにソースをかける。] [{パスタ {200 g}} {合いびき肉 {200 g}} {カットトマト缶 {1 缶}} {玉ねぎ {0.5 個}}] {620.8 40.5 25.3 65.1 []}} {3 鶏むね肉と野菜の黒酢炒め 中華 3 20 [鶏むね肉は一口大に切り、片栗粉をまぶす。 パプリカ、ピーマン、玉ねぎを乱切りにする。 フライパンにごま油を熱し、鶏肉を炒める。 野菜を加え、火が通ったら黒酢、醤油、砂糖を合わせたタレを絡める。] [{鶏むね肉 {300 g}} {パプリカ（赤・黄） {1 個}} {ピーマン {2 個}} {黒酢 {3 大さじ}}] {380.2 45.8 12.5 20.3 [{食物繊維 {5.2 g}}]}} {4 アボカドとトマトのサラダ サラダ 2 10 [アボカドとトマトを角切りにする。 ボウルに入れ、レモン汁、オリーブオイル、塩胡椒で和える。 器に盛り付け、お好みでバジルを散らす。] [{アボカド {1 個}} {トマト {1 個}} {オリーブオイル {1 大さじ}}] {250.9 5.1 22.8 12.4 [{ビタミンE {3.1 mg}}]}} {5 鮭のムニエル レモンバターソース 洋食 2 15 [鮭に塩胡椒をし、薄力粉を薄くまぶす。 フライパンにバターとオリーブオイルを熱し、鮭を両面焼く。 焼き色がついたら火を弱め、レモン汁と醤油を加えてソースを絡める。 皿に盛り付け、パセリを振る。] [{生鮭の切り身 {2 切れ}} {薄力粉 {1 大さじ}} {バター {10 g}} {レモン汁 {0.5 個分}}] {410.7 35.5 28.1 5.8 [{DHA・EPA {2.5 g}}]}} {6 豆腐とワカメの味噌汁 和食 4 10 [鍋にだし汁を入れ、火にかける。 沸騰直前に、食べやすい大きさに切った豆腐と乾燥ワカメを加える。 ワカメが戻ったら火を止め、味噌を溶き入れる。 器に注いでネギを散らす。] [{だし汁 {800 ml}} {木綿豆腐 {150 g}} {乾燥ワカメ {3 g}} {味噌 {4 大さじ}}] {85.3 7.9 4.1 6.8 [{カル シウム {120 mg}}]}} {7 麻婆豆腐 中華 3 20 [豆腐は水気を切り、2cm角に切る。 長ネギ、生姜、にんにくをみじん切りにする。 フライパンにごま油を熱し、ひき肉、ネギ、生姜、にんにくを炒める。 豆板醤を加え、香りが立ったら水、鶏ガラスープの素、醤 油、酒を加える。 豆腐を入れ、煮立ったら水溶き片栗粉でとろみをつける。] [{木綿豆腐 {300 g}} {豚ひき肉 {100 g}} {長ネギ {0.5 本}} {豆板醤 {1 小さじ}}] {480 38.5 30.1 15.6 []}} {8 ポークカレー カレー 6 50 [豚肉、じゃがいも、人参、玉ねぎを 食べやすい大きさに切る。 鍋に油を熱し、豚肉と野菜を炒める。 水を加え、アクを取りながら野菜が柔らかくなるまで煮込む。 いったん火を止め、カレールーを割り入れて溶かす。 再度加熱し、とろみがつくまで煮込む。] [{豚肉（カレー用） {300 g}} {じ ゃがいも {3 個}} {人参 {2 本}} {玉ねぎ {2 個}} {カレールー {1 箱}}] {550.6 25.1 20.9 70.4 []}} {9 きんぴらごぼう 和食 4 20 [ごぼうと人参を細切りにし、ごぼうは水にさらす。 フライパンにごま油を熱し、水気を切ったごぼうと人参を炒める。 火が通ったら、醤油、みりん、砂糖、酒を合わせた調味料を加え、汁気がなくなるまで炒め煮にする。 最後にいりごまを振る。] [{ごぼう {1 本}} {人参 {0.5 本}} {ごま油 {1 大さじ}} {醤油 {2 大さじ}}] {150.4 3.5 8.1 18.2 [{食物繊維 {6.8 g}}]}} {10 簡単オムライス 洋食 1 15 [玉ねぎ、鶏肉をみじん切りにする。 フライパンで鶏肉、玉ねぎの順に炒め、ご飯を加えてケチャップ、塩胡椒で味付けしチキンライスを作る。 別のフライパンで卵に牛乳と塩を混ぜたものを流し入れ、半熟のオムレツを作る。 チキンラ イスを皿に盛り、オムレツを乗せる。 上からケチャップをかける。] [{ご飯 {200 g}} {卵 {2 個}} {鶏もも肉 {50 g}} {玉ねぎ {0.25 個}} {ケチャップ {3 大さじ}}] {580.9 28.1 25.5 60.2 [{鉄分 {1.5 mg}}]}}]

----カロリーを基準に昇順にソートしたデータ----

 [{6 豆腐とワカメの味噌汁 和食 4 10 [鍋にだし汁を入れ、火にかける。 沸騰直前に、食べやすい大きさに切った豆腐と乾燥ワカメを加える。 ワカメが戻ったら火を止め、味噌を溶き入れる。 器に注いでネギを散らす。] [{だし汁 {800 ml}} {木綿豆腐 {150 g}} {乾燥ワカメ {3 g}} {味噌 {4 大さじ}}] {85.3 7.9 4.1 6.8 [{カルシウム {120 mg}}]}} {9 きんぴらごぼう 和食 4 20 [ごぼうと人参を細切りにし、ごぼうは水にさらす。 フライパンにごま油を熱し、水気を切ったごぼうと人参を炒める。 火が通ったら 、醤油、みりん、砂糖、酒を合わせた調味料を加え、汁気がなくなるまで炒め煮にする。 最後にいりごまを振る。] [{ごぼう {1 本}} {人参 {0.5 本}} {ごま油 {1 大さじ}} {醤油 {2 大さじ}}] {150.4 3.5 8.1 18.2 [{食物繊維 {6.8 g}}]}} {4 アボカドとト マトのサラダ サラダ 2 10 [アボカドとトマトを角切りにする。 ボウルに入れ、レモン汁、オリーブオイル、塩胡椒で和える。 器に盛り付け、お好みでバジルを散らす。] [{アボカド {1 個}} {トマト {1 個}} {オリーブオイル {1 大さじ}}] {250.9 5.1 22.8 12.4 [{ビタミンE {3.1 mg}}]}} {3 鶏むね肉と野菜の黒酢炒め 中華 3 20 [鶏むね肉は一口大に切り、片栗粉をまぶす。 パプリカ、ピーマン、玉ねぎを乱切りにする。 フライパンにごま油を熱し、鶏肉を炒める。 野菜を加え、火が通ったら黒酢、醤油、砂糖を合わせたタレを絡める。] [{鶏むね肉 {300 g}} {パプリカ（赤・黄） {1 個}} {ピーマン {2 個}} {黒酢 {3 大さじ}}] {380.2 45.8 12.5 20.3 [{食物繊維 {5.2 g}}]}} {5 鮭のムニエル レモンバターソース 洋食 2 15 [鮭に塩胡椒をし、薄力粉を薄くまぶす。 フライパンにバターとオリーブオイルを熱し、鮭を両面焼く。 焼き色がついたら火を弱め、レモン汁と醤油を加えてソースを絡める。 皿に盛り付け、パセリを振る。] [{生鮭の切り身 {2 切れ}} {薄力粉 {1 大さじ}} {バター {10 g}} {レモン汁 {0.5 個分}}] {410.7 35.5 28.1 5.8 [{DHA・EPA {2.5 g}}]}} {1 基本の肉じゃが 和食 4 35 [牛肉は食べやすい大きさに切る。 じゃがいも、玉ねぎ、人参は皮をむき、適当な大きさに切る。 鍋に油を熱し、牛肉、じゃがいも、人参、玉ねぎの順に炒める。 水と調味料（醤 油、みりん、砂糖、酒）を加え、アクを取りながら煮込む。 じゃがいもが柔らかくなったら完成。] [{牛肉（薄切り） {250 g}} {じゃがいも {4 個}} {人参 {1 本}} {玉ねぎ {1 個}} {醤油 {4 大さじ}}] {450.5 30.2 18.1 48.7 [{ビタミンC {35 mg}}]}} {7  麻婆豆腐 中華 3 20 [豆腐は水気を切り、2cm角に切る。 長ネギ、生姜、にんにくをみじん切りにする。 フライパンにごま油を熱し、ひき肉、ネギ、生姜、にんにくを炒める。 豆板醤を加え、香りが立ったら水、鶏ガラスープの素、醤油、酒を加える。 豆腐を 入れ、煮立ったら水溶き片栗粉でとろみをつける。] [{木綿豆腐 {300 g}} {豚ひき肉 {100 g}} {長ネギ {0.5 本}} {豆板醤 {1 小さじ}}] {480 38.5 30.1 15.6 []}} {8 ポークカレー カレー 6 50 [豚肉、じゃがいも、人参、玉ねぎを食べやすい大きさに切る。 鍋に油を熱し、豚肉と野菜を炒める。 水を加え、アクを取りながら野菜が柔らかくなるまで煮込む。 いったん火を止め、カレールーを割り入れて溶かす。 再度加熱し、とろみがつくまで煮込む。] [{豚肉（カレー用） {300 g}} {じゃがいも {3 個}} {人参 {2 本}} {玉ねぎ {2 個}} {カレールー {1 箱}}] {550.6 25.1 20.9 70.4 []}} {10 簡単オムライス 洋食 1 15 [玉ねぎ、鶏肉をみじん切りにする。 フライパンで鶏肉、玉ねぎの順に炒め、ご飯を加えてケチャップ、塩胡椒で味付けしチキンライスを作る。 別のフライパンで卵に牛乳と塩を混ぜたものを流し入れ、半熟のオムレツを作る。 チキンライスを皿に盛り、オムレツを乗せる。 上からケチャップをかける。] [{ご飯 {200 g}} {卵 {2 個}} {鶏もも肉 {50 g}} {玉ねぎ {0.25 個}} {ケチャップ {3 大さじ}}] {580.9 28.1 25.5 60.2 [{鉄分 {1.5 mg}}]}} {2 簡単ミートソースパスタ 洋食 2 25 [玉ねぎ、人参、セロリをみじん切りにする。 鍋にオリーブオイルを熱し、ひき肉とみじん切り野菜を炒める。 ひき肉の色が変わったら、カットトマト缶、水、コンソメ、ローリエ を加える。 弱火で20分ほど煮込み、塩胡椒で味を調える。 茹でたパスタにソースをかける。] [{パスタ {200 g}} {合いびき肉 {200 g}} {カットトマト缶 {1 缶}} {玉ねぎ {0.5 個}}] {620.8 40.5 25.3 65.1 []}}]

----カロリーを基準に昇順にソートしたデータ（カロリーのみ）----

85.3
150.4
250.9
380.2
410.7
450.5
480
550.6
580.9
620.8

----料理時間を基準に降順にソートしたデータ----

 [{8 ポークカレー カレー 6 50 [豚肉、じゃがいも、人参、玉ねぎを食べやすい大きさに切る。 鍋に油を熱し、豚肉と野菜を炒める。 水を加え、アクを取りながら野菜が柔らかくなるまで煮込む。 いったん火を止め、カレールーを割り入れて溶かす。 再度加 熱し、とろみがつくまで煮込む。] [{豚肉（カレー用） {300 g}} {じゃがいも {3 個}} {人参 {2 本}} {玉ねぎ {2 個}} {カレールー {1 箱}}] {550.6 25.1 20.9 70.4 []}} {1 基本の肉じゃが 和食 4 35 [牛肉は食べやすい大きさに切る。 じゃがいも、玉ねぎ、人参は皮をむき、適当な大きさに切る。 鍋に油を熱し、牛肉、じゃがいも、人参、玉ねぎの順に炒める。 水と調味料（醤油、みりん、砂糖、酒）を加え、アクを取りながら煮込む。 じゃがいもが柔らかくなったら完成。] [{牛肉（薄切り） {250 g}} {じゃがいも {4 個}} {人参 {1 本}} {玉ねぎ {1 個}} {醤油 {4 大さじ}}] {450.5 30.2 18.1 48.7 [{ビタミンC {35 mg}}]}} {2 簡単ミートソースパスタ 洋食 2 25 [玉ねぎ、人参、セロリをみじん切りにする。 鍋にオリーブオイルを熱し、ひき肉とみじん切り野菜を炒める。 ひき肉の色が変わったら、カットトマト缶、水、コンソメ、ローリエを加える。 弱火で20分ほど煮込み、塩胡椒で味を調える。 茹でたパスタにソースをかける。] [{パスタ {200 g}} {合いびき肉 {200 g}} {カットトマト缶 {1 缶}} {玉ねぎ {0.5 個}}] {620.8 40.5 25.3 65.1 []}} {7 麻婆豆腐 中華 3 20 [豆腐は水気を切り、2cm角に切る。 長ネギ、生姜、にんにくをみじん切りにする。 フライパンにごま油を熱し、ひき肉、ネギ、生姜、にんにくを炒める。 豆板醤を加え、香りが立ったら水、鶏ガラスー プの素、醤油、酒を加える。 豆腐を入れ、煮立ったら水溶き片栗粉でとろみをつける。] [{木綿豆腐 {300 g}} {豚ひき肉 {100 g}} {長ネギ {0.5 本}} {豆板醤 {1 小さじ}}] {480 38.5 30.1 15.6 []}} {9 きんぴらごぼう 和食 4 20 [ごぼうと人参を細切りに し、ごぼうは水にさらす。 フライパンにごま油を熱し、水気を切ったごぼうと人参を炒める。 火が通ったら、醤油、みりん、砂糖、酒を合わせた調味料を加え、汁気がなくなるまで炒め煮にする。 最後にいりごまを振る。] [{ごぼう {1 本}} {人参 {0.5 本}} {ごま油 {1 大さじ}} {醤油 {2 大さじ}}] {150.4 3.5 8.1 18.2 [{食物繊維 {6.8 g}}]}} {3 鶏むね肉と野菜の黒酢炒め 中華 3 20 [鶏むね肉は一口大に切り、片栗粉をまぶす。 パプリカ、ピーマン、玉ねぎを乱切りにする。 フライパンにごま油を熱し、鶏肉 を炒める。 野菜を加え、火が通ったら黒酢、醤油、砂糖を合わせたタレを絡める。] [{鶏むね肉 {300 g}} {パプリカ（赤・黄） {1 個}} {ピーマン {2 個}} {黒酢 {3 大さじ}}] {380.2 45.8 12.5 20.3 [{食物繊維 {5.2 g}}]}} {10 簡単オムライス 洋食 1 15 [玉ねぎ、鶏肉をみじん切りにする。 フライパンで鶏肉、玉ねぎの順に炒め、ご飯を加えてケチャップ、塩胡椒で味付けしチキンライスを作る。 別のフライパンで卵に牛乳と塩を混ぜたものを流し入れ、半熟のオムレツを作る。 チキンライスを皿に盛り、オムレツを乗せる。 上からケチャップをかける。] [{ご飯 {200 g}} {卵 {2 個}} {鶏もも肉 {50 g}} {玉ねぎ {0.25 個}} {ケチャップ {3 大さじ}}] {580.9 28.1 25.5 60.2 [{鉄分 {1.5 mg}}]}} {5 鮭のムニエル レモンバターソース 洋食 2 15 [鮭に塩胡椒をし、 薄力粉を薄くまぶす。 フライパンにバターとオリーブオイルを熱し、鮭を両面焼く。 焼き色がついたら火を弱め、レモン汁と醤油を加えてソースを絡める。 皿に盛り付け、パセリを振る。] [{生鮭の切り身 {2 切れ}} {薄力粉 {1 大さじ}} {バター {10 g}} { レモン汁 {0.5 個分}}] {410.7 35.5 28.1 5.8 [{DHA・EPA {2.5 g}}]}} {4 アボカドとトマトのサラダ サラダ 2 10 [アボカドとトマトを角切りにする。 ボウルに入れ、レモン汁、オリーブオイル、塩胡椒で和える。 器に盛り付け、お好みでバジルを散らす。] [{アボカド {1 個}} {トマト {1 個}} {オリーブオイル {1 大さじ}}] {250.9 5.1 22.8 12.4 [{ビタミンE {3.1 mg}}]}} {6 豆腐とワカメの味噌汁 和食 4 10 [鍋にだし汁を入れ、火にかける。 沸騰直前に、食べやすい大きさに切った豆腐と乾燥ワカメを加え る。 ワカメが戻ったら火を止め、味噌を溶き入れる。 器に注いでネギを散らす。] [{だし汁 {800 ml}} {木綿豆腐 {150 g}} {乾燥ワカメ {3 g}} {味噌 {4 大さじ}}] {85.3 7.9 4.1 6.8 [{カルシウム {120 mg}}]}}]

----料理時間を基準に降順にソートしたデータ（時間のみ）----

50
35
25
20
20
20
15
15
10
10

----ソート関数のエラーログ----

error while checking orderBy.
'hoge' is invalid orderby option

----カロリー上限1500、調理時間上限60分でたんぱく質が最大になるレシピの組み合わせ
IDの配列
 [2 3 5]
たんぱく質の量(g)
 121.8

----ナップサック問題のエラーログ----

error
validation failed:
no recipe data input
maxCalories must be greater than or equal to 1
maxCookingTime must be greater than or equal to 1
```